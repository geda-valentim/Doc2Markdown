(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{86:(e,t,r)=>{Promise.resolve().then(r.bind(r,5404))},235:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(5155),n=r(2115),s=r(489),o=r(3101),i=r(5016);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.b,{ref:t,className:(0,i.cn)(l(),r),...n})});c.displayName=s.b.displayName},3209:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i,wL:()=>u});var a=r(5155),n=r(2115),s=r(5016);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},5016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2821),n=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},5404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),n=r(2115),s=r(63),o=r(2619),i=r.n(o),l=r(549),c=r(7621),d=r(5895),u=r(7003),f=r(6170),h=r(235),m=r(3209);function p(){let e=(0,s.useRouter)(),t=(0,d.n)(e=>e.setAuth),[r,o]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),b=(0,l.n)({mutationFn:c.ZQ.login,onSuccess:async r=>{localStorage.setItem("auth_token",r.access_token),t(await c.ZQ.me(),r.access_token),e.push("/dashboard")},onError:e=>{var t,r;v((null==(r=e.response)||null==(t=r.data)?void 0:t.detail)||"Login failed. Please try again.")}});return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,a.jsxs)(m.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(m.aR,{className:"space-y-1",children:[(0,a.jsx)(m.ZB,{className:"text-3xl font-bold text-center",children:"Welcome to Doc2MD"}),(0,a.jsx)(m.BT,{className:"text-center",children:"Enter your credentials to access your account"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(""),b.mutate({username:r,password:p})},children:[(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[y&&(0,a.jsx)("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3 text-sm text-destructive",children:y}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.J,{htmlFor:"username",children:"Username or Email"}),(0,a.jsx)(f.p,{id:"username",type:"text",placeholder:"Enter your username or email",value:r,onChange:e=>o(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.J,{htmlFor:"password",children:"Password"}),(0,a.jsx)(f.p,{id:"password",type:"password",placeholder:"Enter your password",value:p,onChange:e=>g(e.target.value),required:!0})]})]}),(0,a.jsxs)(m.wL,{className:"flex flex-col space-y-4",children:[(0,a.jsx)(u.$,{type:"submit",className:"w-full",disabled:b.isPending,children:b.isPending?"Signing in...":"Sign In"}),(0,a.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:["Don't have an account?"," ",(0,a.jsx)(i(),{href:"/register",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})]})]})})}},5895:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var a=r(5959),n=r(9863);let s=(0,a.v)()((0,n.Zr)(e=>({user:null,token:null,_hasHydrated:!1,setAuth:(t,r)=>e({user:t,token:r}),clearAuth:()=>e({user:null,token:null}),setHasHydrated:t=>e({_hasHydrated:t})}),{name:"auth-storage",storage:(0,n.KU)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))},5959:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var a=r(2115);let n=e=>{let t,r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:a,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,n,s);return s},s=e=>{let t=(e=>e?n(e):n)(e),r=e=>(function(e,t=e=>e){let r=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?s(e):s},6170:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var a=r(5155),n=r(2115),s=r(5016);let o=n.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},7003:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(5155),n=r(2115),s=r(2467),o=r(3101),i=r(5016);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:n,size:o,className:r})),ref:t,...d})});c.displayName="Button"},7621:(e,t,r)=>{"use strict";r.d(t,{Bt:()=>o,ZQ:()=>s,t_:()=>i});let a=r(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080";function n(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};if(e){let e=localStorage.getItem("auth_token");e&&(t.Authorization="Bearer ".concat(e))}return t}let s={async register(e){let t=await fetch("".concat(a,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw{response:{data:await t.json().catch(()=>({detail:"Registration failed"}))}};return t.json()},async login(e){let t=new URLSearchParams;t.append("username",e.username),t.append("password",e.password);let r=await fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw{response:{data:await r.json().catch(()=>({detail:"Login failed"}))}};return r.json()},async me(){let e=await fetch("".concat(a,"/auth/me"),{headers:n(!0)});if(!e.ok)throw Error("Failed to fetch user profile");return e.json()}},o={async convert(e){let t=new FormData;t.append("source_type",e.source_type),e.file&&t.append("file",e.file),e.source&&t.append("source",e.source),e.name&&t.append("name",e.name),e.authToken&&t.append("auth_token",e.authToken);let r=await fetch("".concat(a,"/convert"),{method:"POST",headers:n(!0),body:t});if(!r.ok)throw Error("Conversion failed: ".concat(r.statusText));return r.json()},async upload(e){let t=new FormData;t.append("file",e.file),e.name&&t.append("name",e.name);let r=await fetch("".concat(a,"/upload"),{method:"POST",headers:n(!0),body:t});if(!r.ok)throw Error("Upload failed: ".concat(r.statusText));return r.json()},async getStatus(e){let t=await fetch("".concat(a,"/jobs/").concat(e),{headers:n(!0)});if(!t.ok)throw Error("Failed to fetch job status: ".concat(t.statusText));return t.json()},async getResult(e){let t=await fetch("".concat(a,"/jobs/").concat(e,"/result"),{headers:n(!0)});if(!t.ok)throw Error("Failed to fetch job result: ".concat(t.statusText));return t.json()},async getPages(e){let t=await fetch("".concat(a,"/jobs/").concat(e,"/pages"),{headers:n(!0)});if(!t.ok)throw Error("Failed to fetch job pages: ".concat(t.statusText));return t.json()},async list(e){let t=new URLSearchParams;(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.job_type)&&t.set("job_type",e.job_type);let r="".concat(a,"/jobs").concat(t.toString()?"?".concat(t):""),s=await fetch(r,{headers:n(!0)});if(!s.ok)throw Error("Failed to fetch jobs: ".concat(s.statusText));return s.json()},async search(e){let t=new URLSearchParams;t.set("query",e.query),e.limit&&t.set("limit",e.limit.toString());let r=await fetch("".concat(a,"/jobs/search?").concat(t),{headers:n(!0)});if(!r.ok)throw Error("Search failed: ".concat(r.statusText));return r.json()},async cancel(e){let t=await fetch("".concat(a,"/jobs/").concat(e,"/cancel"),{method:"POST",headers:n(!0)});if(!t.ok)throw Error("Failed to cancel job: ".concat(t.statusText));return t.json()},async getPageResultByNumber(e,t){let r=(await this.getPages(e)).pages.find(e=>e.page_number===t);if(!r)throw Error("Page ".concat(t," not found"));return this.getResult(r.job_id)},async delete(e){let t=await fetch("".concat(a,"/jobs/").concat(e),{method:"DELETE",headers:n(!0)});if(!t.ok)throw Error("Failed to delete job: ".concat(t.statusText));return t.json()},async retryPage(e){let t=await fetch("".concat(a,"/jobs/").concat(e,"/retry"),{method:"POST",headers:n(!0)});if(!t.ok)throw Error("Failed to retry page: ".concat(t.statusText));let r=await t.json();return r.new_job_id||r.job_id}},i={async list(){let e=await fetch("".concat(a,"/apikeys"),{headers:n(!0)});if(!e.ok)throw Error("Failed to list API keys: ".concat(e.statusText));return(await e.json()).api_keys||[]},async create(e){let t=await fetch("".concat(a,"/apikeys"),{method:"POST",headers:{...n(!0),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create API key: ".concat(t.statusText));return t.json()},async revoke(e){let t=await fetch("".concat(a,"/apikeys/").concat(e),{method:"DELETE",headers:n(!0)});if(!t.ok)throw Error("Failed to revoke API key: ".concat(t.statusText));return t.json()}}},9863:(e,t,r)=>{"use strict";function a(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var a;let n=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(a=r.getItem(e))?a:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,a)=>r.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}r.d(t,{KU:()=>a,Zr:()=>s});let n=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>n(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>n(t)(e)}}},s=(e,t)=>(r,s,o)=>{let i,l={storage:a(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,d=new Set,u=new Set,f=l.storage;if(!f)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},s,o);let h=()=>{let e=l.partialize({...s()});return f.setItem(l.name,{state:e,version:l.version})},m=o.setState;o.setState=(e,t)=>(m(e,t),h());let p=e((...e)=>(r(...e),h()),s,o);o.getInitialState=()=>p;let g=()=>{var e,t;if(!f)return;c=!1,d.forEach(e=>{var t;return e(null!=(t=s())?t:p)});let a=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=s())?e:p))||void 0;return n(f.getItem.bind(f))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,n]=e;if(r(i=l.merge(n,null!=(t=s())?t:p),!0),a)return h()}).then(()=>{null==a||a(i,void 0),i=s(),c=!0,u.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return o.persist={setOptions:e=>{l={...l,...e},e.storage&&(f=e.storage)},clearStorage:()=>{null==f||f.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>g(),hasHydrated:()=>c,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},l.skipHydration||g(),i||p}}},e=>{e.O(0,[209,296,441,255,358],()=>e(e.s=86)),_N_E=e.O()}]);