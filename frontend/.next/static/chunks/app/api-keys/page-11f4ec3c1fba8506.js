(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{235:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var s=a(5155),r=a(2115),n=a(489),o=a(3101),i=a(5016);let c=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(c(),a),...r})});l.displayName=n.b.displayName},489:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var s=a(2115),r=a(7602),n=a(5155),o=s.forwardRef((e,t)=>(0,n.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o},3209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>i,wL:()=>u});var s=a(5155),r=a(2115),n=a(5016);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});l.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},3632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(5155),r=a(2115),n=a(63),o=a(9776),i=a(2454),c=a(549),l=a(5626),d=a(5370),u=a(1847);let h=(0,u.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var m=a(1362);let f=(0,u.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=a(1360),x=a(7621),y=a(5895),g=a(7003),j=a(6170),v=a(235),b=a(3209),w=a(7830);function k(){let e=(0,n.useRouter)(),t=(0,o.jE)(),a=(0,y.n)(e=>null!==e.token&&null!==e.user),u=(0,y.n)(e=>e._hasHydrated),[k,N]=(0,r.useState)(!1),[P,_]=(0,r.useState)(""),[A,T]=(0,r.useState)(30),[C,S]=(0,r.useState)(null),[I,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u&&!a&&e.push("/login")},[a,u,e]);let{data:R,isLoading:F}=(0,i.I)({queryKey:["api-keys"],queryFn:x.t_.list}),B=(0,c.n)({mutationFn:x.t_.create,onSuccess:e=>{S(e.api_key),_(""),T(30),N(!1),t.invalidateQueries({queryKey:["api-keys"]})}}),K=(0,c.n)({mutationFn:x.t_.revoke,onSuccess:()=>{t.invalidateQueries({queryKey:["api-keys"]})}});return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted",children:[(0,s.jsx)("header",{className:"border-b bg-background/95 backdrop-blur",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)(g.$,{variant:"ghost",onClick:()=>e.push("/dashboard"),children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-8 w-8"}),"API Keys"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage API keys for programmatic access"})]}),(0,s.jsxs)(g.$,{onClick:()=>N(!k),children:[(0,s.jsx)(h,{className:"h-4 w-4 mr-2"}),"Create API Key"]})]}),C&&(0,s.jsxs)(b.Zp,{className:"border-green-500/50 bg-green-500/5",children:[(0,s.jsxs)(b.aR,{children:[(0,s.jsxs)(b.ZB,{className:"text-green-600 dark:text-green-400 flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-5 w-5"}),"API Key Created Successfully"]}),(0,s.jsx)(b.BT,{children:"Make sure to copy your API key now. You won't be able to see it again!"})]}),(0,s.jsxs)(b.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(j.p,{value:C,readOnly:!0,className:"font-mono text-sm"}),(0,s.jsx)(g.$,{onClick:()=>{navigator.clipboard.writeText(C),E(!0),setTimeout(()=>E(!1),2e3)},variant:"outline",children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Copied"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{className:"h-4 w-4 mr-2"}),"Copy"]})})]}),(0,s.jsx)(g.$,{variant:"outline",size:"sm",onClick:()=>S(null),children:"I've saved my API key"})]})]}),k&&(0,s.jsxs)(b.Zp,{children:[(0,s.jsxs)(b.aR,{children:[(0,s.jsx)(b.ZB,{children:"Create New API Key"}),(0,s.jsx)(b.BT,{children:"API keys are used for programmatic access to the API"})]}),(0,s.jsxs)(b.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"keyName",children:"Key Name"}),(0,s.jsx)(j.p,{id:"keyName",placeholder:"e.g., Production Server",value:P,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"expires",children:"Expires In (days)"}),(0,s.jsx)(j.p,{id:"expires",type:"number",min:1,max:365,value:A,onChange:e=>T(parseInt(e.target.value))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave at 30 days or set to 365 for long-term keys"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g.$,{onClick:()=>{B.mutate({name:P,expires_in_days:A||null})},disabled:!P||B.isPending,children:B.isPending?"Creating...":"Create Key"}),(0,s.jsx)(g.$,{variant:"outline",onClick:()=>N(!1),children:"Cancel"})]})]})]}),(0,s.jsxs)(b.Zp,{children:[(0,s.jsxs)(b.aR,{children:[(0,s.jsx)(b.ZB,{children:"Your API Keys"}),(0,s.jsxs)(b.BT,{children:[(null==R?void 0:R.length)||0," active API key(s)"]})]}),(0,s.jsx)(b.Wu,{children:F?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):R&&R.length>0?(0,s.jsx)("div",{className:"space-y-4",children:R.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-4 mt-1 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Created ",(0,w.m)(new Date(e.created_at),{addSuffix:!0})]}),e.last_used_at&&(0,s.jsxs)("span",{children:["Last used ",(0,w.m)(new Date(e.last_used_at),{addSuffix:!0})]}),e.expires_at&&(0,s.jsxs)("span",{children:["Expires ",(0,w.m)(new Date(e.expires_at),{addSuffix:!0})]})]})]}),(0,s.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to revoke this API key? This action cannot be undone.")&&K.mutate(t))},disabled:K.isPending,className:"text-destructive hover:text-destructive",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"No API keys yet"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Create one to start using the API programmatically"})]})})]}),(0,s.jsxs)(b.Zp,{children:[(0,s.jsx)(b.aR,{children:(0,s.jsx)(b.ZB,{children:"How to Use API Keys"})}),(0,s.jsxs)(b.Wu,{className:"space-y-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Include the API key in your requests:"}),(0,s.jsx)("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:'curl -X POST http://localhost:8080/upload \\\n  -H "X-API-Key: doc2md_sk_..." \\\n  -F "file=@document.pdf"'})]}),(0,s.jsxs)("div",{className:"text-muted-foreground",children:[(0,s.jsx)("p",{children:"• API keys provide the same access as your user account"}),(0,s.jsx)("p",{children:"• Keep your API keys secret and never commit them to version control"}),(0,s.jsx)("p",{children:"• Revoke any keys that may have been compromised"}),(0,s.jsx)("p",{children:"• Use different keys for different environments (dev, staging, prod)"})]})]})]})]})})]})}},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},5370:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},5895:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});var s=a(5959),r=a(9863);let n=(0,s.v)()((0,r.Zr)(e=>({user:null,token:null,_hasHydrated:!1,setAuth:(t,a)=>e({user:t,token:a}),clearAuth:()=>e({user:null,token:null}),setHasHydrated:t=>e({_hasHydrated:t})}),{name:"auth-storage",storage:(0,r.KU)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))},5998:(e,t,a)=>{Promise.resolve().then(a.bind(a,3632))},6170:(e,t,a)=>{"use strict";a.d(t,{p:()=>o});var s=a(5155),r=a(2115),n=a(5016);let o=r.forwardRef((e,t)=>{let{className:a,type:r,...o}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});o.displayName="Input"},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>c});var s=a(5155),r=a(2115),n=a(2467),o=a(3101),i=a(5016);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:l=!1,...d}=e,u=l?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:o,className:a})),ref:t,...d})});l.displayName="Button"},7621:(e,t,a)=>{"use strict";a.d(t,{Bt:()=>o,ZQ:()=>n,t_:()=>i});let s=a(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8080";function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};if(e){let e=localStorage.getItem("auth_token");e&&(t.Authorization="Bearer ".concat(e))}return t}let n={async register(e){let t=await fetch("".concat(s,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw{response:{data:await t.json().catch(()=>({detail:"Registration failed"}))}};return t.json()},async login(e){let t=new URLSearchParams;t.append("username",e.username),t.append("password",e.password);let a=await fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!a.ok)throw{response:{data:await a.json().catch(()=>({detail:"Login failed"}))}};return a.json()},async me(){let e=await fetch("".concat(s,"/auth/me"),{headers:r(!0)});if(!e.ok)throw Error("Failed to fetch user profile");return e.json()}},o={async convert(e){let t=new FormData;t.append("source_type",e.source_type),e.file&&t.append("file",e.file),e.source&&t.append("source",e.source),e.name&&t.append("name",e.name),e.authToken&&t.append("auth_token",e.authToken);let a=await fetch("".concat(s,"/convert"),{method:"POST",headers:r(!0),body:t});if(!a.ok)throw Error("Conversion failed: ".concat(a.statusText));return a.json()},async upload(e){let t=new FormData;t.append("file",e.file),e.name&&t.append("name",e.name);let a=await fetch("".concat(s,"/upload"),{method:"POST",headers:r(!0),body:t});if(!a.ok)throw Error("Upload failed: ".concat(a.statusText));return a.json()},async getStatus(e){let t=await fetch("".concat(s,"/jobs/").concat(e),{headers:r(!0)});if(!t.ok)throw Error("Failed to fetch job status: ".concat(t.statusText));return t.json()},async getResult(e){let t=await fetch("".concat(s,"/jobs/").concat(e,"/result"),{headers:r(!0)});if(!t.ok)throw Error("Failed to fetch job result: ".concat(t.statusText));return t.json()},async getPages(e){let t=await fetch("".concat(s,"/jobs/").concat(e,"/pages"),{headers:r(!0)});if(!t.ok)throw Error("Failed to fetch job pages: ".concat(t.statusText));return t.json()},async list(e){let t=new URLSearchParams;(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.job_type)&&t.set("job_type",e.job_type);let a="".concat(s,"/jobs").concat(t.toString()?"?".concat(t):""),n=await fetch(a,{headers:r(!0)});if(!n.ok)throw Error("Failed to fetch jobs: ".concat(n.statusText));return n.json()},async search(e){let t=new URLSearchParams;t.set("query",e.query),e.limit&&t.set("limit",e.limit.toString());let a=await fetch("".concat(s,"/jobs/search?").concat(t),{headers:r(!0)});if(!a.ok)throw Error("Search failed: ".concat(a.statusText));return a.json()},async cancel(e){let t=await fetch("".concat(s,"/jobs/").concat(e,"/cancel"),{method:"POST",headers:r(!0)});if(!t.ok)throw Error("Failed to cancel job: ".concat(t.statusText));return t.json()},async getPageResultByNumber(e,t){let a=(await this.getPages(e)).pages.find(e=>e.page_number===t);if(!a)throw Error("Page ".concat(t," not found"));return this.getResult(a.job_id)},async delete(e){let t=await fetch("".concat(s,"/jobs/").concat(e),{method:"DELETE",headers:r(!0)});if(!t.ok)throw Error("Failed to delete job: ".concat(t.statusText));return t.json()},async retryPage(e){let t=await fetch("".concat(s,"/jobs/").concat(e,"/retry"),{method:"POST",headers:r(!0)});if(!t.ok)throw Error("Failed to retry page: ".concat(t.statusText));let a=await t.json();return a.new_job_id||a.job_id}},i={async list(){let e=await fetch("".concat(s,"/apikeys"),{headers:r(!0)});if(!e.ok)throw Error("Failed to list API keys: ".concat(e.statusText));return(await e.json()).api_keys||[]},async create(e){let t=await fetch("".concat(s,"/apikeys"),{method:"POST",headers:{...r(!0),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create API key: ".concat(t.statusText));return t.json()},async revoke(e){let t=await fetch("".concat(s,"/apikeys/").concat(e),{method:"DELETE",headers:r(!0)});if(!t.ok)throw Error("Failed to revoke API key: ".concat(t.statusText));return t.json()}}}},e=>{e.O(0,[209,841,441,255,358],()=>e(e.s=5998)),_N_E=e.O()}]);